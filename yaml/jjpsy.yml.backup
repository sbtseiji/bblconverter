constants:
  maxnames: 20


parenyear: &parenyeardot
  - text::"("
  - 
    - cond::ifdef[year,true]
    -
      - value::year
    -
      - value::pubstate
  - text::"). "

family-giveni: &family-giveni 
  - 
    - cond::ifequal[listcount,maxnames]&&ifless[listcount,listtotal]
    -
      - text::"... "
    -
      - cond::ifgreater[listcount,maxnames]&&ifless[listcount,listtotal]
      -
        - text::""
      -
        - value::family
        - text::", "
        - value::giveni
        -
          - cond::ifequal[listcount,listtotal]
          - 
            - text::""
          -
            - text::", "
  - count::1

jname: &jname 
  - 
    - cond::ifequal[listcount,maxnames]&&ifless[listcount,listtotal]
    -
      - text::"..."
    -
      - cond::ifgreater[listcount,maxnames]&&ifless[listcount,listtotal]
      -
        - text::""
      -
        - cond::ifequal[listcount,1]
        - 
          - value::family
          - text::" "
          - value::given
        -
          - cond::ifless[listcount,maxnames]
          -
            - text::"ãƒ»"
            - value::family
            - text::" "
            - value::given
          -
            - value::family
            - text::" "
            - value::given

  - count::1

format:
  japanese:
    article:
      author: *jname
      year: *parenyeardot
      title: 
        - value::title
        -
          - cond::ifdef[field::subtitle,true]
          - 
            - delim::EMDASH
            - delim::EMDASH
            - value::subtitle
            - delim::EMDASH
            - delim::EMDASH
        - punct::" "
      journaltitle:
        - value::journaltitle
      volume:
        - 
          - cond::ifdef[field::volume,true]
          -
            - text::", "
            - value::volume::italic
        -
          - cond::ifdef[field::number,true]
          -
            - cond::ifdef[field::volume,true]
            -
              - text::"("
              - value::number
              - text::")"
            -
              - text::", No."
              - value::number
      pages:
        -
          - cond::ifdef[field::pages,true]
          -
            - text::", "
            - value::pages
            - text::"."
        - punct::""
      doi:
        - 
          - cond::ifdef[field::doi,true]
          - 
            - delim::LINEBREAK
            - url::["https://doi.org/",value::doi]
  other:
    article:
      author: *family-giveni
      year: *parenyeardot
      title: 
        - value::title
        -
          - cond::ifdef[field::subtitle,true]
          - 
            - delim::COLON
            - delim::SPACE
            - value::subtitle
        - punct::". "
      journaltitle:
        - value::journaltitle::italic
      volume:
        - 
          - cond::ifdef[field::volume,true]
          -
            - text::", "
            - value::volume::italic
        -
          - cond::ifdef[field::number,true]
          -
            - cond::ifdef[field::volume,true]
            -
              - text::"("
              - value::number
              - text::")"
            -
              - text::"No."
              - value::number
      pages:
        -
          - cond::ifdef[field::pages,true]
          -
            - text::", "
            - value::pages
        - punct::"."